<!DOCTYPE html>
<html lang = "en">
  <head>
    <meta charset = "utf-8">
    <title> Day19_exercise2 </title>
  </head>

  <body>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script>
      var posts = []
      // posts array 생성

      var post = {
        // post object 생성
        url: 'http://jsonplaceholder.typicode.com/posts/',
        // url property에 link를 value로 넣음.
         $el: $('<div class="post">').appendTo($('body')),
         $el: $('<div class="post">').appendTo('body'),
        // $el property에
        initialize: function(id) {
        // initialize property에 id를 argument로 받는 function 생성
          this.$el.attr('id', id)

          // post object의 id 항목을 id로 설정
          this.url += id
          console.log("a");
          console.log("this.url" + this.url);
          //post object의 url property에 ide값을 합하여 url property에 다시 넣음.
          var thisPost = this
          console.log( "thisPost" + this);
          // thisPost 변수를 만들어 post object를 assign
          $.get(this.url, function(data) {
          // post object의 url property의 value 값에 있는 server를 load하고, data를 인자로 받아 다음 function을 수행
            console.log(this)
            // post object를 화면에 출력
            console.log(thisPost);
            thisPost.attributes = data
            //thisPost 변수의 attributes property에 data를 assign

            thisPost.render()
            //thisPost변수의 render method 호출
          })
          posts.push(this)
          // posts의 마지막 array 항목에 post object를 assign
        },
        render: function() {
          // .append에 array를 argument로 넣어주면 array안의 item들을 순서대로 넣어줍니다
          this.$el.append([
            $('<div>').addClass('title').text(this.attributes.title),
            $('<div>').addClass('body').text(this.attributes.body)
          ])
        }
      }

      post.initialize(1)

      //
      // var post_factory = function(post.id){
      //   post.initialize(post.id);
      //
      // }
    </script>
  </body>

</html>
